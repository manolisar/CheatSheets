<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Troubleshooting macOS CheatSheet</title>
    <meta name="description" content="Network diagnostic commands and tools for troubleshooting connectivity issues on macOS">
    <link rel="stylesheet" href="../../styles/cheatsheet.css">
</head>
<body class="software-development">
    <header class="header">
        <h1>Network Troubleshooting macOS</h1>
        <p>Network diagnostic commands and tools for troubleshooting connectivity issues on macOS</p>
    </header>

    <main class="container">
        <div class="section">
            <h2>Basic Network Information</h2>
            <div class="command-line">
                <span class="command">ifconfig</span>
                <span class="description">Display network interface configuration</span>
            </div>
            <div class="command-line">
                <span class="command">ifconfig en0</span>
                <span class="description">Show specific interface (Ethernet)</span>
            </div>
            <div class="command-line">
                <span class="command">ifconfig en1</span>
                <span class="description">Show WiFi interface</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -listallhardwareports</span>
                <span class="description">List all network hardware ports</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -getinfo "Wi-Fi"</span>
                <span class="description">Get WiFi configuration details</span>
            </div>
            <div class="command-line">
                <span class="command">scutil --get ComputerName</span>
                <span class="description">Get computer name</span>
            </div>
            <div class="command-line">
                <span class="command">hostname</span>
                <span class="description">Display system hostname</span>
            </div>
        </div>

        <div class="section">
            <h2>IP Configuration</h2>
            <div class="command-line">
                <span class="command">ipconfig getifaddr en0</span>
                <span class="description">Get IP address for en0</span>
            </div>
            <div class="command-line">
                <span class="command">ipconfig getpacket en0</span>
                <span class="description">Show DHCP packet info</span>
            </div>
            <div class="command-line">
                <span class="command">ipconfig getoption en0 domain_name</span>
                <span class="description">Get DHCP option (domain name)</span>
            </div>
            <div class="command-line">
                <span class="command">sudo ipconfig set en0 DHCP</span>
                <span class="description">Set interface to use DHCP</span>
            </div>
            <div class="command-line">
                <span class="command">sudo ipconfig set en0 INFORM</span>
                <span class="description">Renew DHCP lease</span>
            </div>
            <div class="command-line">
                <span class="command">route get default</span>
                <span class="description">Show default gateway</span>
            </div>
        </div>

        <div class="section">
            <h2>WiFi Management</h2>
            <div class="command-line">
                <span class="command">networksetup -getairportnetwork en1</span>
                <span class="description">Show current WiFi network</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -listpreferredwirelessnetworks en1</span>
                <span class="description">List preferred WiFi networks</span>
            </div>
            <div class="command-line">
                <span class="command">/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -s</span>
                <span class="description">Scan for WiFi networks</span>
            </div>
            <div class="command-line">
                <span class="command">airport -I</span>
                <span class="description">Show WiFi connection info</span>
            </div>
            <div class="command-line">
                <span class="command">sudo networksetup -setairportnetwork en1 NetworkName password</span>
                <span class="description">Connect to WiFi network</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -setairportpower en1 off</span>
                <span class="description">Turn WiFi off</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -setairportpower en1 on</span>
                <span class="description">Turn WiFi on</span>
            </div>
        </div>

        <div class="section">
            <h2>DNS Configuration</h2>
            <div class="command-line">
                <span class="command">scutil --dns</span>
                <span class="description">Show DNS configuration</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -getdnsservers "Wi-Fi"</span>
                <span class="description">Get DNS servers for WiFi</span>
            </div>
            <div class="command-line">
                <span class="command">sudo networksetup -setdnsservers "Wi-Fi" 8.8.8.8 8.8.4.4</span>
                <span class="description">Set DNS servers</span>
            </div>
            <div class="command-line">
                <span class="command">sudo dscacheutil -flushcache</span>
                <span class="description">Flush DNS cache</span>
            </div>
            <div class="command-line">
                <span class="command">sudo killall -HUP mDNSResponder</span>
                <span class="description">Restart DNS responder</span>
            </div>
            <div class="command-line">
                <span class="command">dig google.com</span>
                <span class="description">DNS lookup using dig</span>
            </div>
            <div class="command-line">
                <span class="command">nslookup google.com</span>
                <span class="description">DNS lookup using nslookup</span>
            </div>
        </div>

        <div class="section">
            <h2>Connectivity Testing</h2>
            <div class="command-line">
                <span class="command">ping google.com</span>
                <span class="description">Test basic connectivity</span>
            </div>
            <div class="command-line">
                <span class="command">ping -c 4 8.8.8.8</span>
                <span class="description">Ping with specific count</span>
            </div>
            <div class="command-line">
                <span class="command">ping6 ipv6.google.com</span>
                <span class="description">Test IPv6 connectivity</span>
            </div>
            <div class="command-line">
                <span class="command">traceroute google.com</span>
                <span class="description">Trace route to destination</span>
            </div>
            <div class="command-line">
                <span class="command">traceroute6 ipv6.google.com</span>
                <span class="description">IPv6 trace route</span>
            </div>
            <div class="command-line">
                <span class="command">mtr google.com</span>
                <span class="description">Continuous traceroute (if installed)</span>
            </div>
        </div>

        <div class="section">
            <h2>Port and Service Testing</h2>
            <div class="command-line">
                <span class="command">telnet google.com 80</span>
                <span class="description">Test port connectivity</span>
            </div>
            <div class="command-line">
                <span class="command">nc -zv google.com 80</span>
                <span class="description">Test port with netcat</span>
            </div>
            <div class="command-line">
                <span class="command">netstat -an</span>
                <span class="description">Show all network connections</span>
            </div>
            <div class="command-line">
                <span class="command">netstat -rn</span>
                <span class="description">Show routing table</span>
            </div>
            <div class="command-line">
                <span class="command">lsof -i</span>
                <span class="description">Show network connections by process</span>
            </div>
            <div class="command-line">
                <span class="command">lsof -i :80</span>
                <span class="description">Show what's using port 80</span>
            </div>
            <div class="command-line">
                <span class="command">nmap -p 80,443 google.com</span>
                <span class="description">Scan specific ports (if installed)</span>
            </div>
        </div>

        <div class="section">
            <h2>ARP and Network Discovery</h2>
            <div class="command-line">
                <span class="command">arp -a</span>
                <span class="description">Show ARP table</span>
            </div>
            <div class="command-line">
                <span class="command">arp -d hostname</span>
                <span class="description">Delete ARP entry</span>
            </div>
            <div class="command-line">
                <span class="command">ping -c 1 192.168.1.255</span>
                <span class="description">Broadcast ping to discover devices</span>
            </div>
            <div class="command-line">
                <span class="command">nmap -sn 192.168.1.0/24</span>
                <span class="description">Network discovery scan</span>
            </div>
            <div class="command-line">
                <span class="command">dns-sd -B _http._tcp</span>
                <span class="description">Browse for HTTP services (Bonjour)</span>
            </div>
        </div>

        <div class="section">
            <h2>Firewall and Security</h2>
            <div class="command-line">
                <span class="command">sudo pfctl -sa</span>
                <span class="description">Show firewall status and rules</span>
            </div>
            <div class="command-line">
                <span class="command">sudo pfctl -e</span>
                <span class="description">Enable firewall</span>
            </div>
            <div class="command-line">
                <span class="command">sudo pfctl -d</span>
                <span class="description">Disable firewall</span>
            </div>
            <div class="command-line">
                <span class="command">sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate</span>
                <span class="description">Check application firewall status</span>
            </div>
            <div class="command-line">
                <span class="command">sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on</span>
                <span class="description">Enable application firewall</span>
            </div>
        </div>

        <div class="section">
            <h2>Interface Management</h2>
            <div class="command-line">
                <span class="command">sudo ifconfig en0 down</span>
                <span class="description">Disable network interface</span>
            </div>
            <div class="command-line">
                <span class="command">sudo ifconfig en0 up</span>
                <span class="description">Enable network interface</span>
            </div>
            <div class="command-line">
                <span class="command">sudo ifconfig en0 inet 192.168.1.100 netmask 255.255.255.0</span>
                <span class="description">Set static IP address</span>
            </div>
            <div class="command-line">
                <span class="command">sudo route add default 192.168.1.1</span>
                <span class="description">Add default route</span>
            </div>
            <div class="command-line">
                <span class="command">sudo route delete default</span>
                <span class="description">Delete default route</span>
            </div>
        </div>

        <div class="section">
            <h2>VPN and Tunneling</h2>
            <div class="command-line">
                <span class="command">networksetup -listlocations</span>
                <span class="description">List network locations</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -getcurrentlocation</span>
                <span class="description">Show current location</span>
            </div>
            <div class="command-line">
                <span class="command">networksetup -switchtolocation "Home"</span>
                <span class="description">Switch to network location</span>
            </div>
            <div class="command-line">
                <span class="command">scutil --nc list</span>
                <span class="description">List VPN connections</span>
            </div>
            <div class="command-line">
                <span class="command">scutil --nc start "VPN Name"</span>
                <span class="description">Connect to VPN</span>
            </div>
            <div class="command-line">
                <span class="command">scutil --nc stop "VPN Name"</span>
                <span class="description">Disconnect VPN</span>
            </div>
        </div>

        <div class="section">
            <h2>Network Utilities GUI</h2>
            <div class="command-line">
                <span class="command">open /Applications/Utilities/Network\ Utility.app</span>
                <span class="description">Open Network Utility GUI</span>
            </div>
            <div class="command-line">
                <span class="command">open /System/Library/PreferencePanes/Network.prefPane</span>
                <span class="description">Open Network Preferences</span>
            </div>
            <div class="command-line">
                <span class="command">open /Applications/Utilities/Activity\ Monitor.app</span>
                <span class="description">Monitor network activity</span>
            </div>
        </div>

        <div class="section">
            <h2>Bandwidth and Performance</h2>
            <div class="command-line">
                <span class="command">nettop</span>
                <span class="description">Monitor network usage by process</span>
            </div>
            <div class="command-line">
                <span class="command">iftop</span>
                <span class="description">Network bandwidth monitor (if installed)</span>
            </div>
            <div class="command-line">
                <span class="command">networkQuality</span>
                <span class="description">Test network quality (macOS 12+)</span>
            </div>
            <div class="command-line">
                <span class="command">sudo tcpdump -i en0</span>
                <span class="description">Capture network packets</span>
            </div>
            <div class="command-line">
                <span class="command">sudo tcpdump -i en0 host google.com</span>
                <span class="description">Capture packets to/from specific host</span>
            </div>
        </div>

        <div class="section">
            <h2>Common Troubleshooting Workflows</h2>
            <div class="workflow">
                <strong>Basic Connectivity Issues:</strong><br>
                1. Check physical connections<br>
                2. ifconfig (check interface status)<br>
                3. ping 8.8.8.8 (test internet)<br>
                4. ping router IP (test local network)<br>
                5. nslookup google.com (test DNS)<br>
                6. Flush DNS cache if needed
            </div>
            <div class="workflow">
                <strong>WiFi Connection Problems:</strong><br>
                1. airport -I (check WiFi status)<br>
                2. networksetup -getairportnetwork en1<br>
                3. Turn WiFi off/on<br>
                4. Forget and reconnect to network<br>
                5. Check for interference<br>
                6. Reset network settings if needed
            </div>
            <div class="workflow">
                <strong>Slow Network Performance:</strong><br>
                1. networkQuality (test speed)<br>
                2. nettop (check bandwidth usage)<br>
                3. Activity Monitor → Network tab<br>
                4. Check for background processes<br>
                5. Test wired vs wireless<br>
                6. MTU size optimization
            </div>
            <div class="workflow">
                <strong>DNS Resolution Issues:</strong><br>
                1. nslookup google.com<br>
                2. dig google.com<br>
                3. scutil --dns (check config)<br>
                4. Flush DNS cache<br>
                5. Try different DNS servers<br>
                6. Check /etc/hosts file
            </div>
        </div>

        <div class="section">
            <h2>Professional Tips</h2>
            <div class="tip">
                <strong>Network Diagnostics Best Practices:</strong><br>
                • Start with basic connectivity tests<br>
                • Work from bottom up (physical → logical)<br>
                • Document network configuration changes<br>
                • Use multiple diagnostic tools for confirmation<br>
                • Keep network diagrams up to date
            </div>
            <div class="workflow">
                <strong>Performance Optimization:</strong><br>
                • Monitor bandwidth usage regularly<br>
                • Optimize WiFi channel selection<br>
                • Configure proper DNS servers<br>
                • Manage network locations effectively<br>
                • Use wired connections for critical tasks
            </div>
            <div class="workflow">
                <strong>Security Considerations:</strong><br>
                • Enable and configure firewall<br>
                • Use secure DNS providers<br>
                • Monitor unusual network activity<br>
                • Keep VPN connections secure<br>
                • Regular security audits
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>macOS network troubleshooting and diagnostic commands reference • <a href="../../../index.html">View all cheatsheets</a></p>
    </footer>

    <script src="../../js/cheatsheet.js"></script>
</body>
</html>